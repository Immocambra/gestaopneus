(()=>{var e={23:(e,o,a)=>{"use strict";var t=a(726);const n={id:"app"},r={class:"content"};function s(e,o,a,s,i,l){const c=(0,t.g2)("AppHeader"),d=(0,t.g2)("router-view"),u=(0,t.g2)("AppFooter");return(0,t.uX)(),(0,t.CE)("div",n,[(0,t.bF)(c),o[0]||(o[0]=(0,t.Lk)("div",{class:"overlay"},null,-1)),(0,t.Lk)("div",r,[(0,t.bF)(d)]),(0,t.bF)(u)])}const i=a.p+"img/cambra_pneus.a270fd2a.png",l={class:"header"},c={class:"right menu"};function d(e,o,a,n,r,s){return(0,t.uX)(),(0,t.CE)("header",l,[o[9]||(o[9]=(0,t.Lk)("div",{class:"left"},null,-1)),(0,t.Lk)("div",{class:"center logo",onClick:o[0]||(o[0]=(...e)=>s.goHome&&s.goHome(...e))},o[7]||(o[7]=[(0,t.Lk)("img",{src:i,alt:"Logo"},null,-1)])),(0,t.Lk)("div",c,[r.isLoggedIn?((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.Lk)("div",{class:"user-menu",onClick:o[2]||(o[2]=(...e)=>s.toggleDropdown&&s.toggleDropdown(...e))},[(0,t.Lk)("span",null,(0,t.v_)(r.username),1),o[8]||(o[8]=(0,t.Lk)("i",{class:"user-icon"},null,-1))]),r.showDropdown?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"dropdown",onClick:o[6]||(o[6]=(0,t.D$)((()=>{}),["stop"]))},[(0,t.Lk)("ul",null,[(0,t.Lk)("li",{onClick:o[3]||(o[3]=(...e)=>s.goToStock&&s.goToStock(...e))},"Gerir stock"),(0,t.Lk)("li",{onClick:o[4]||(o[4]=(...e)=>s.goToAccount&&s.goToAccount(...e))},"Gerir conta"),(0,t.Lk)("li",{onClick:o[5]||(o[5]=(...e)=>s.logout&&s.logout(...e))},"Log out")])])):(0,t.Q3)("",!0)],64)):((0,t.uX)(),(0,t.CE)("button",{key:0,onClick:o[1]||(o[1]=(...e)=>s.goToLogin&&s.goToLogin(...e))},"Login"))])])}var u=a(537);const p={name:"AppHeader",data(){return{showDropdown:!1,isLoggedIn:!1,username:"Usuário"}},mounted(){this.updateLoginStatus(),window.addEventListener("tokenChanged",this.updateLoginStatus),document.addEventListener("click",this.handleClickOutside)},beforeUnmount(){window.removeEventListener("tokenChanged",this.updateLoginStatus),document.removeEventListener("click",this.handleClickOutside)},methods:{updateLoginStatus(){const e=localStorage.getItem("token");if(this.isLoggedIn=!!e,e){const o=(0,u.s)(e);this.username=o.name||"Usuário"}else this.username="Usuário"},goHome(){this.$router.push("/")},goToLogin(){this.$router.push("/login")},toggleDropdown(e){e.stopPropagation(),this.showDropdown=!this.showDropdown},goToStock(){this.$router.push("/gestaostock"),this.showDropdown=!1},goToAccount(){this.$router.push("/conta"),this.showDropdown=!1},logout(){localStorage.removeItem("token"),this.updateLoginStatus(),window.dispatchEvent(new Event("tokenChanged")),this.$router.push("/login"),this.showDropdown=!1},handleClickOutside(e){this.$el.contains(e.target)||(this.showDropdown=!1)}}};var m=a(262);const h=(0,m.A)(p,[["render",d],["__scopeId","data-v-55c5fe4d"]]),g=h,k={class:"footer"};function L(e,o,a,n,r,s){return(0,t.uX)(),(0,t.CE)("footer",k," © CambraPneus 2025 ")}const v={name:"AppFooter"},E=(0,m.A)(v,[["render",L],["__scopeId","data-v-5970da61"]]),C=E,A={name:"App",components:{AppHeader:g,AppFooter:C}},f=(0,m.A)(A,[["render",s]]),b=f;var y=a(220);const P={class:"homepage"};function I(e,o,a,n,r,s){const i=(0,t.g2)("SearchWindow");return(0,t.uX)(),(0,t.CE)("div",P,[(0,t.bF)(i)])}const _={class:"search-window"},w={class:"container"},N={class:"form-group"},O={class:"form-group"},S=["value"],R={key:0,class:"advanced"},D={class:"form-group"},T={class:"form-group"},X=["value"],U={class:"form-group"},M={class:"button-group"};function x(e,o,a,n,r,s){return(0,t.uX)(),(0,t.CE)("div",_,[(0,t.Lk)("div",w,[o[16]||(o[16]=(0,t.Lk)("h2",null,"Pesquisar Pneus",-1)),(0,t.Lk)("form",{onSubmit:o[7]||(o[7]=(0,t.D$)(((...e)=>s.buscarPneus&&s.buscarPneus(...e)),["prevent"]))},[(0,t.Lk)("div",N,[o[8]||(o[8]=(0,t.Lk)("label",{for:"medida"},"Medida:",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",id:"medida","onUpdate:modelValue":o[0]||(o[0]=e=>r.medidaFormatada=e),onInput:o[1]||(o[1]=(...e)=>s.formatarMedida&&s.formatarMedida(...e)),placeholder:"Digite a medida (ex: 1956515)"},null,544),[[t.Jo,r.medidaFormatada]])]),(0,t.Lk)("div",O,[o[10]||(o[10]=(0,t.Lk)("label",{for:"marca"},"Marca:",-1)),(0,t.bo)((0,t.Lk)("select",{id:"marca","onUpdate:modelValue":o[2]||(o[2]=e=>r.marca=e)},[o[9]||(o[9]=(0,t.Lk)("option",{value:""},"Selecione uma marca",-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.marcas,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e,value:e},(0,t.v_)(e),9,S)))),128))],512),[[t.u1,r.marca]])]),r.showAdvanced?((0,t.uX)(),(0,t.CE)("div",R,[(0,t.Lk)("div",D,[o[11]||(o[11]=(0,t.Lk)("label",{for:"modelo"},"Modelo:",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",id:"modelo","onUpdate:modelValue":o[3]||(o[3]=e=>r.modelo=e),placeholder:"Digite o modelo"},null,512),[[t.Jo,r.modelo]])]),(0,t.Lk)("div",T,[o[13]||(o[13]=(0,t.Lk)("label",{for:"jante"},"Jante:",-1)),(0,t.bo)((0,t.Lk)("select",{id:"jante","onUpdate:modelValue":o[4]||(o[4]=e=>r.jante=e)},[o[12]||(o[12]=(0,t.Lk)("option",{value:""},"Selecione uma jante",-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.jantes,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e,value:e},(0,t.v_)(e),9,X)))),128))],512),[[t.u1,r.jante]])]),(0,t.Lk)("div",U,[o[14]||(o[14]=(0,t.Lk)("label",{for:"comercial"},"Comercial:",-1)),(0,t.bo)((0,t.Lk)("input",{type:"checkbox",id:"comercial","onUpdate:modelValue":o[5]||(o[5]=e=>r.comercial=e)},null,512),[[t.lH,r.comercial]])])])):(0,t.Q3)("",!0),(0,t.Lk)("div",M,[(0,t.Lk)("button",{type:"button",onClick:o[6]||(o[6]=(...e)=>s.toggleAdvanced&&s.toggleAdvanced(...e))},(0,t.v_)(r.showAdvanced?"Ocultar Opções Avançadas":"Opções Avançadas"),1),o[15]||(o[15]=(0,t.Lk)("button",{type:"submit"},"Ok",-1))])],32)])])}const z={name:"SearchWindow",data(){return{marca:"",medida:"",medidaFormatada:"",modelo:"",jante:"",comercial:!1,showAdvanced:!1,marcas:["APLUS","ATLAS","BARUM","BRIDGESTONE","CHAO YANG","COMFORSER","CONTINENTAL","COOPER","DELMAX","DUNLOP","FALKEN","FEDIMA","FIREMAX","FIRESTONE","FORTUNA","GITI","GOODRICH","GOOD RIDE","GOODYEAR","GRENLANDER","HABILEAD","HAIDA","HANKOOK","INTERSTATE","JOURNEY","KELLY TIRES","KUMHO","LINGLONG","MABOR","MARSHAL","MAXTREK","MAZZINI","METZELER","MICHELIN","MILEKING","MINNELL","NANKANG","NEXEN","PIRELLI","RADAR","SECURITY","SUPERIA","TOYO","TRACMAX","TRIANGLE","VREDESTEIN","WESTLAKE","WINDFORCE","WINRUN","YOKOHAMA"],jantes:[13,14,15,16,17,18,19,20,21,22]}},methods:{toggleAdvanced(){this.showAdvanced=!this.showAdvanced},formatarMedida(){let e=this.medidaFormatada.replace(/\D/g,"");e.length>3&&(e=e.slice(0,3)+"/"+e.slice(3)),e.length>6&&(e=e.slice(0,6)+"/"+e.slice(6)),this.medidaFormatada=e,this.medida=e.replace(/\//g,"")},buscarPneus(){const e={};this.marca&&(e.marca=this.marca),this.medida&&(e.medida=this.medida),this.showAdvanced&&this.modelo&&(e.modelo=this.modelo),this.showAdvanced&&this.jante&&(e.jante=this.jante),this.showAdvanced&&this.comercial&&(e.comercial=this.comercial),this.$router.push({path:"/pesquisa",query:e})}}},$=(0,m.A)(z,[["render",x],["__scopeId","data-v-64ee6782"]]),F=$,Q={name:"HomePage",components:{SearchWindow:F}},j=(0,m.A)(Q,[["render",I],["__scopeId","data-v-40feded8"]]),q=j,G={key:0,class:"container"},H={class:"search-container"},K={key:0,class:"popup-overlay"},W={class:"popup-content"},V={key:0},B={key:1},J={class:"form-group"},Y={class:"form-group"},Z={class:"form-group"},ee={class:"location-input-container"},oe={class:"tooltip-container"},ae=["src"],te={class:"form-group"},ne={class:"form-group"},re={class:"form-group"},se={class:"form-group"},ie={key:2,class:"button-group"},le=["disabled"],ce=["disabled"],de=["disabled"],ue={key:1},pe={key:0},me={key:0},he={key:0},ge={key:0},ke={key:0},Le={key:0},ve=["onClick"],Ee={class:"location-cell"},Ce={class:"tooltip-container"},Ae=["src"],fe={key:2},be={key:1};function ye(e,o,a,n,r,s){return r.isLoggedIn?((0,t.uX)(),(0,t.CE)("div",G,[o[38]||(o[38]=(0,t.Lk)("h1",null,"Gestão de Pneus",-1)),(0,t.Lk)("div",H,[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>r.searchQuery=e),type:"text",placeholder:"Pesquisar..."},null,512),[[t.Jo,r.searchQuery]]),(0,t.Lk)("button",{onClick:o[1]||(o[1]=(...e)=>s.adicionarPneu&&s.adicionarPneu(...e))},"Adicionar Pneu"),(0,t.Lk)("button",{onClick:o[2]||(o[2]=(...e)=>s.gerarPdf&&s.gerarPdf(...e))},"Gerar PDF")]),r.mostrarCriarPneu||r.mostrarPneuDetalhes?((0,t.uX)(),(0,t.CE)("div",K,[(0,t.Lk)("div",W,[(0,t.Lk)("button",{onClick:o[3]||(o[3]=(...e)=>s.fecharPopup&&s.fecharPopup(...e)),class:"close-btn"},"X"),r.mostrarCriarPneu?((0,t.uX)(),(0,t.CE)("h2",V,"Adicionar Pneu")):(0,t.Q3)("",!0),r.mostrarPneuDetalhes?((0,t.uX)(),(0,t.CE)("h2",B,"Detalhes do Pneu")):(0,t.Q3)("",!0),(0,t.Lk)("div",J,[o[23]||(o[23]=(0,t.Lk)("label",null,"Medida:",-1)),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>r.selecionadoPneu.tamanho=e),type:"text",onInput:o[5]||(o[5]=(...e)=>s.formatarTamanho&&s.formatarTamanho(...e))},null,544),[[t.Jo,r.selecionadoPneu.tamanho]])]),(0,t.Lk)("div",Y,[o[24]||(o[24]=(0,t.Lk)("label",null,"Comercial:",-1)),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[6]||(o[6]=e=>r.selecionadoPneu.comercial=e),type:"checkbox"},null,512),[[t.lH,r.selecionadoPneu.comercial]])]),(0,t.Lk)("div",Z,[(0,t.Lk)("label",null,[o[26]||(o[26]=(0,t.eW)(" Localização: ")),(0,t.Lk)("div",ee,[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[7]||(o[7]=e=>r.selecionadoPneu.localizacao=e),type:"text",onInput:o[8]||(o[8]=(...e)=>s.validarLocalizacao&&s.validarLocalizacao(...e)),placeholder:"A1, B2, etc."},null,544),[[t.Jo,r.selecionadoPneu.localizacao]]),(0,t.Lk)("span",oe,[o[25]||(o[25]=(0,t.Lk)("i",{class:"info-icon"},"i",-1)),(0,t.Lk)("img",{src:s.getPlantaImage(r.selecionadoPneu.localizacao),alt:"Planta",class:"tooltip-image"},null,8,ae)])])])]),(0,t.Lk)("div",te,[o[27]||(o[27]=(0,t.Lk)("label",null,"Marca:",-1)),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":o[9]||(o[9]=e=>r.selecionadoPneu.marca=e)},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.marcas,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e},(0,t.v_)(e),1)))),128))],512),[[t.u1,r.selecionadoPneu.marca]])]),(0,t.Lk)("div",ne,[o[28]||(o[28]=(0,t.Lk)("label",null,"Modelo:",-1)),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[10]||(o[10]=e=>r.selecionadoPneu.modelo=e),type:"text"},null,512),[[t.Jo,r.selecionadoPneu.modelo]])]),(0,t.Lk)("div",re,[o[29]||(o[29]=(0,t.Lk)("label",null,"Quantidade:",-1)),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[11]||(o[11]=e=>r.selecionadoPneu.quantidade=e),type:"number"},null,512),[[t.Jo,r.selecionadoPneu.quantidade]])]),(0,t.Lk)("div",se,[o[30]||(o[30]=(0,t.Lk)("label",null,"Preço:",-1)),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[12]||(o[12]=e=>r.selecionadoPneu.preco=e),type:"number",min:"0",step:"any"},null,512),[[t.Jo,r.selecionadoPneu.preco]])]),r.mostrarPneuDetalhes?((0,t.uX)(),(0,t.CE)("div",ie,[(0,t.Lk)("button",{onClick:o[13]||(o[13]=e=>s.eliminarPneu(r.selecionadoPneu.id)),disabled:r.loading},"Eliminar",8,le),(0,t.Lk)("button",{onClick:o[14]||(o[14]=(...e)=>s.salvarAlteracoes&&s.salvarAlteracoes(...e)),disabled:r.loading},"Salvar Alterações",8,ce)])):(0,t.Q3)("",!0),r.mostrarPneuDetalhes?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("button",{key:3,onClick:o[15]||(o[15]=(...e)=>s.salvarAlteracoes&&s.salvarAlteracoes(...e)),disabled:r.loading},(0,t.v_)(r.mostrarPneuDetalhes?"Salvar Alterações":"Submeter"),9,de))])])):(0,t.Q3)("",!0),r.pneus.length?((0,t.uX)(),(0,t.CE)("table",ue,[(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",{onClick:o[16]||(o[16]=e=>s.ordenar("tamanho"))},[o[31]||(o[31]=(0,t.eW)(" Medida ")),"tamanho"===r.ordemColuna?((0,t.uX)(),(0,t.CE)("span",pe,(0,t.v_)(r.ordemAscendente?"↑":"↓"),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("th",{onClick:o[17]||(o[17]=e=>s.ordenar("marca"))},[o[32]||(o[32]=(0,t.eW)(" Marca ")),"marca"===r.ordemColuna?((0,t.uX)(),(0,t.CE)("span",me,(0,t.v_)(r.ordemAscendente?"↑":"↓"),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("th",{onClick:o[18]||(o[18]=e=>s.ordenar("modelo"))},[o[33]||(o[33]=(0,t.eW)(" Modelo ")),"modelo"===r.ordemColuna?((0,t.uX)(),(0,t.CE)("span",he,(0,t.v_)(r.ordemAscendente?"↑":"↓"),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("th",{onClick:o[19]||(o[19]=e=>s.ordenar("localizacao"))},[o[34]||(o[34]=(0,t.eW)(" Localização ")),"localizacao"===r.ordemColuna?((0,t.uX)(),(0,t.CE)("span",ge,(0,t.v_)(r.ordemAscendente?"↑":"↓"),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("th",{onClick:o[20]||(o[20]=e=>s.ordenar("quantidade"))},[o[35]||(o[35]=(0,t.eW)(" Quantidade ")),"quantidade"===r.ordemColuna?((0,t.uX)(),(0,t.CE)("span",ke,(0,t.v_)(r.ordemAscendente?"↑":"↓"),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("th",{onClick:o[21]||(o[21]=e=>s.ordenar("preco"))},[o[36]||(o[36]=(0,t.eW)(" Preço ")),"preco"===r.ordemColuna?((0,t.uX)(),(0,t.CE)("span",Le,(0,t.v_)(r.ordemAscendente?"↑":"↓"),1)):(0,t.Q3)("",!0)])])]),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.pneus,(e=>((0,t.uX)(),(0,t.CE)("tr",{key:e.id,onClick:o=>s.mostrarDetalhesPneu(e),onMouseenter:o[22]||(o[22]=e=>s.adjustTooltipPosition(e))},[(0,t.Lk)("td",null,(0,t.v_)(s.formatarTamanhoExibicao(e.tamanho))+(0,t.v_)(e.comercial?" C":""),1),(0,t.Lk)("td",null,(0,t.v_)(e.marca),1),(0,t.Lk)("td",null,(0,t.v_)(e.modelo),1),(0,t.Lk)("td",Ee,[(0,t.Lk)("span",null,(0,t.v_)(e.localizacao),1),(0,t.Lk)("span",Ce,[o[37]||(o[37]=(0,t.Lk)("i",{class:"info-icon"},"i",-1)),(0,t.Lk)("img",{src:s.getPlantaImage(e.localizacao),alt:"Planta",class:"tooltip-image"},null,8,Ae)])]),(0,t.Lk)("td",null,(0,t.v_)(e.quantidade),1),(0,t.Lk)("td",null,(0,t.v_)(s.formatarPreco(e.preco)),1)],40,ve)))),128))])])):((0,t.uX)(),(0,t.CE)("p",fe,"Nenhum pneu encontrado."))])):((0,t.uX)(),(0,t.CE)("div",be,o[39]||(o[39]=[(0,t.Lk)("p",null,"Redirecionando para a página de login...",-1)])))}var Pe=a(605);const Ie={data(){return{pneus:[],searchQuery:"",mostrarCriarPneu:!1,mostrarPneuDetalhes:!1,selecionadoPneu:null,marcas:["APLUS","ATLAS","BARUM","BRIDGESTONE","CHAO YANG","COMFORSER","CONTINENTAL","COOPER","DELMAX","DUNLOP","FALKEN","FEDIMA","FIREMAX","FIRESTONE","FORTUNA","GITI","GOODRICH","GOOD RIDE","GOODYEAR","GRENLANDER","HABILEAD","HAIDA","HANKOOK","INTERSTATE","JOURNEY","KELLY TIRES","KUMHO","LINGLONG","MABOR","MARSHAL","MAXTREK","MAZZINI","METZELER","MICHELIN","MILEKING","MINNELL","NANKANG","NEXEN","PIRELLI","RADAR","SECURITY","SUPERIA","TOYO","TRACMAX","TRIANGLE","VREDESTEIN","WESTLAKE","WINDFORCE","WINRUN","YOKOHAMA"],ordemColuna:"",ordemAscendente:!0,loading:!1,isLoggedIn:!1}},created(){this.checkLoginStatus(),this.listarPneus()},methods:{checkLoginStatus(){const e=localStorage.getItem("token");if(e)try{const o=(0,u.s)(e);this.isLoggedIn=!!o}catch(o){console.error("Erro ao decodificar o token:",o),this.isLoggedIn=!1,this.$router.push("/login")}else this.isLoggedIn=!1,this.$router.push("/login")},async listarPneus(){this.loading=!0;try{const{data:e}=await Pe.A.get("http://localhost:8000/pneus/");this.pneus=e}catch(e){console.error("Erro ao listar pneus:",e)}finally{this.loading=!1}},async eliminarPneu(e){const o=window.confirm("Tem certeza que deseja eliminar este pneu?");if(o)try{this.loading=!0;const o=localStorage.getItem("token");await Pe.A.delete(`http://localhost:8000/pneus/${e}/`,{headers:{Authorization:`Bearer ${o}`}}),this.fecharPopup(),this.listarPneus()}catch(a){console.error("Erro ao eliminar pneu:",a)}finally{this.loading=!1}},mostrarDetalhesPneu(e){this.selecionadoPneu={...e},this.mostrarPneuDetalhes=!0},adicionarPneu(){this.selecionadoPneu={marca:"",modelo:"",tamanho:"",preco:null,quantidade:null,comercial:!1,localizacao:""},this.mostrarCriarPneu=!0},fecharPopup(){this.mostrarCriarPneu=!1,this.mostrarPneuDetalhes=!1,this.selecionadoPneu=null},salvarAlteracoes(){this.selecionadoPneu.id?this.atualizarPneu():this.criarPneu()},async atualizarPneu(){try{const e=localStorage.getItem("token");await Pe.A.put(`http://localhost:8000/pneus/${this.selecionadoPneu.id}/`,this.selecionadoPneu,{headers:{Authorization:`Bearer ${e}`}}),this.fecharPopup(),this.listarPneus()}catch(e){console.error("Erro ao atualizar pneu:",e)}},async criarPneu(){try{const e=localStorage.getItem("token");await Pe.A.post("http://localhost:8000/pneus/",this.selecionadoPneu,{headers:{Authorization:`Bearer ${e}`}}),this.fecharPopup(),this.listarPneus()}catch(e){console.error("Erro ao criar pneu:",e)}},formatarTamanho(){this.selecionadoPneu.tamanho=this.selecionadoPneu.tamanho.replace(/\D/g,"").slice(0,7)},formatarTamanhoExibicao(e){return e?e.replace(/(\d{3})(\d{2})(\d{2})/,"$1/$2/$3"):""},formatarPreco(e){return e?`${e.toFixed(2)} €`:""},getPlantaImage(e){try{return a(86)(`./planta_${e[0].toLowerCase()}.png`)}catch(o){return a(39)}},validarLocalizacao(){this.selecionadoPneu.localizacao=this.selecionadoPneu.localizacao.toUpperCase();const e=/^[A-K][1-4]?$|^[L-R]$/;e.test(this.selecionadoPneu.localizacao)||(this.selecionadoPneu.localizacao=this.selecionadoPneu.localizacao.slice(0,-1))},ordenar(e){this.ordemColuna===e?this.ordemAscendente=!this.ordemAscendente:(this.ordemColuna=e,this.ordemAscendente=!0),this.pneus.sort(((o,a)=>{let t=o[e],n=a[e];return"string"===typeof t&&(t=t.toLowerCase(),n=n.toLowerCase()),t<n?this.ordemAscendente?-1:1:t>n?this.ordemAscendente?1:-1:0}))},adjustTooltipPosition(e){const o=e.target.querySelector(".tooltip-image"),a=e.target.getBoundingClientRect(),t=window.innerHeight;a.bottom+o.offsetHeight>t?(o.style.top="auto",o.style.bottom="100%",o.style.marginBottom="10px"):(o.style.top="-10px",o.style.bottom="auto",o.style.marginBottom="0")},gerarPdf(){}}},_e=(0,m.A)(Ie,[["render",ye],["__scopeId","data-v-1d55d1fa"]]),we=_e,Ne={class:"login-window"},Oe={class:"container"},Se={class:"form-group"},Re={class:"form-group"},De={key:0,style:{color:"red"}};function Te(e,o,a,n,r,s){return(0,t.uX)(),(0,t.CE)("div",Ne,[(0,t.Lk)("div",Oe,[o[6]||(o[6]=(0,t.Lk)("h2",null,"Login",-1)),(0,t.Lk)("form",{onSubmit:o[2]||(o[2]=(0,t.D$)(((...e)=>s.fazerLogin&&s.fazerLogin(...e)),["prevent"]))},[(0,t.Lk)("div",Se,[o[3]||(o[3]=(0,t.Lk)("label",{for:"username"},"Usuário:",-1)),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>r.username=e),type:"text",id:"username",required:""},null,512),[[t.Jo,r.username]])]),(0,t.Lk)("div",Re,[o[4]||(o[4]=(0,t.Lk)("label",{for:"password"},"Senha:",-1)),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>r.password=e),type:"password",id:"password",required:""},null,512),[[t.Jo,r.password]])]),o[5]||(o[5]=(0,t.Lk)("div",{class:"button-group"},[(0,t.Lk)("button",{type:"submit"},"Entrar")],-1))],32),r.erro?((0,t.uX)(),(0,t.CE)("p",De,(0,t.v_)(r.erro),1)):(0,t.Q3)("",!0)])])}const Xe={data(){return{username:"marcia",password:"marcia",erro:""}},methods:{async fazerLogin(){try{const e=await Pe.A.post("http://127.0.0.1:8000/users/login/",{nome:this.username,senha:this.password}),o=e.data.access_token;localStorage.setItem("token",o),window.dispatchEvent(new Event("tokenChanged")),console.log("Login bem-sucedido! Token salvo."),this.$router.push("/")}catch(e){console.error("Erro ao fazer login:",e),this.erro="Usuário ou senha inválidos!"}}}},Ue=(0,m.A)(Xe,[["render",Te],["__scopeId","data-v-8ae405d6"]]),Me=Ue,xe={class:"container"},ze={key:0},$e={key:1},Fe={key:2},Qe={key:0},je={key:0},qe={key:0},Ge={key:0},He={key:0},Ke={key:0},We={key:0,class:"location-cell"},Ve={class:"tooltip-container"},Be=["src"],Je={key:3};function Ye(e,o,a,n,r,s){return(0,t.uX)(),(0,t.CE)("div",xe,[o[13]||(o[13]=(0,t.Lk)("h1",null,"Resultados da Pesquisa",-1)),Object.keys(e.$route.query).length?((0,t.uX)(),(0,t.CE)("p",ze,"Parâmetros: "+(0,t.v_)(e.$route.query),1)):((0,t.uX)(),(0,t.CE)("p",$e,"Nenhum parâmetro informado.")),r.pneus.length?((0,t.uX)(),(0,t.CE)("table",Fe,[(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",{onClick:o[0]||(o[0]=e=>s.ordenar("tamanho"))},[o[6]||(o[6]=(0,t.eW)(" Medida ")),"tamanho"===r.ordemColuna?((0,t.uX)(),(0,t.CE)("span",Qe,(0,t.v_)(r.ordemAscendente?"↑":"↓"),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("th",{onClick:o[1]||(o[1]=e=>s.ordenar("marca"))},[o[7]||(o[7]=(0,t.eW)(" Marca ")),"marca"===r.ordemColuna?((0,t.uX)(),(0,t.CE)("span",je,(0,t.v_)(r.ordemAscendente?"↑":"↓"),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("th",{onClick:o[2]||(o[2]=e=>s.ordenar("modelo"))},[o[8]||(o[8]=(0,t.eW)(" Modelo ")),"modelo"===r.ordemColuna?((0,t.uX)(),(0,t.CE)("span",qe,(0,t.v_)(r.ordemAscendente?"↑":"↓"),1)):(0,t.Q3)("",!0)]),r.isLoggedIn?((0,t.uX)(),(0,t.CE)("th",{key:0,onClick:o[3]||(o[3]=e=>s.ordenar("localizacao"))},[o[9]||(o[9]=(0,t.eW)(" Localização ")),"localizacao"===r.ordemColuna?((0,t.uX)(),(0,t.CE)("span",Ge,(0,t.v_)(r.ordemAscendente?"↑":"↓"),1)):(0,t.Q3)("",!0)])):(0,t.Q3)("",!0),(0,t.Lk)("th",{onClick:o[4]||(o[4]=e=>s.ordenar("quantidade"))},[o[10]||(o[10]=(0,t.eW)(" Quantidade ")),"quantidade"===r.ordemColuna?((0,t.uX)(),(0,t.CE)("span",He,(0,t.v_)(r.ordemAscendente?"↑":"↓"),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("th",{onClick:o[5]||(o[5]=e=>s.ordenar("preco"))},[o[11]||(o[11]=(0,t.eW)(" Preço ")),"preco"===r.ordemColuna?((0,t.uX)(),(0,t.CE)("span",Ke,(0,t.v_)(r.ordemAscendente?"↑":"↓"),1)):(0,t.Q3)("",!0)])])]),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.pneus,(e=>((0,t.uX)(),(0,t.CE)("tr",{key:e.id},[(0,t.Lk)("td",null,(0,t.v_)(s.formatarTamanhoExibicao(e.tamanho))+(0,t.v_)(e.comercial?" C":""),1),(0,t.Lk)("td",null,(0,t.v_)(e.marca),1),(0,t.Lk)("td",null,(0,t.v_)(e.modelo),1),r.isLoggedIn?((0,t.uX)(),(0,t.CE)("td",We,[(0,t.Lk)("span",null,(0,t.v_)(e.localizacao),1),(0,t.Lk)("span",Ve,[o[12]||(o[12]=(0,t.Lk)("i",{class:"info-icon"},"i",-1)),(0,t.Lk)("img",{src:s.getPlantaImage(e.localizacao),alt:"Planta",class:"tooltip-image"},null,8,Be)])])):(0,t.Q3)("",!0),(0,t.Lk)("td",null,(0,t.v_)(e.quantidade),1),(0,t.Lk)("td",null,(0,t.v_)(s.formatarPreco(e.preco)),1)])))),128))])])):((0,t.uX)(),(0,t.CE)("p",Je,"Nenhum pneu encontrado."))])}const Ze={data(){return{pneus:[],ordemColuna:"",ordemAscendente:!0,loading:!1,isLoggedIn:!1}},created(){this.buscarResultados(),this.checkLoginStatus()},methods:{async buscarResultados(){this.loading=!0;try{const e=this.$route.query,o=await Pe.A.get("http://localhost:8000/pneus/",{params:e});let a=o.data;e.jante&&(a=a.filter((o=>o.tamanho.slice(-2)===e.jante))),e.medida&&(a=a.filter((o=>o.tamanho===e.medida))),void 0!==e.comercial&&(a=a.filter((o=>o.comercial===("true"===e.comercial)))),this.pneus=a}catch(e){console.error("Erro ao buscar resultados:",e)}finally{this.loading=!1}},ordenar(e){this.ordemColuna===e?this.ordemAscendente=!this.ordemAscendente:(this.ordemColuna=e,this.ordemAscendente=!0),this.pneus.sort(((o,a)=>{let t=o[e],n=a[e];return"string"===typeof t&&(t=t.toLowerCase(),n=n.toLowerCase()),t<n?this.ordemAscendente?-1:1:t>n?this.ordemAscendente?1:-1:0}))},formatarTamanhoExibicao(e){return e?e.replace(/(\d{3})(\d{2})(\d{2})/,"$1/$2/$3"):""},formatarPreco(e){return e?`${e.toFixed(2)} €`:""},getPlantaImage(e){try{return a(86)(`./planta_${e.toLowerCase()}.png`)}catch(o){return a(39)}},checkLoginStatus(){const e=localStorage.getItem("token");if(e)try{const o=(0,u.s)(e);this.isLoggedIn=!!o}catch(o){console.error("Erro ao decodificar o token:",o),this.isLoggedIn=!1}else this.isLoggedIn=!1}}},eo=(0,m.A)(Ze,[["render",Ye],["__scopeId","data-v-8a67b918"]]),oo=eo,ao={key:0,class:"account-page"},to={class:"container"},no={class:"form-group"},ro={class:"form-group"},so={class:"button-container"},io={class:"criar-usuario-button"},lo={key:0,class:"popup-overlay"},co={class:"popup-content"},uo={class:"form-group"},po={class:"form-group"};function mo(e,o,a,n,r,s){return r.isLoggedIn?((0,t.uX)(),(0,t.CE)("div",ao,[(0,t.Lk)("div",to,[o[11]||(o[11]=(0,t.Lk)("h2",null,"Gerenciar Conta",-1)),(0,t.Lk)("form",{onSubmit:o[3]||(o[3]=(0,t.D$)(((...e)=>s.atualizarConta&&s.atualizarConta(...e)),["prevent"]))},[(0,t.Lk)("div",no,[o[8]||(o[8]=(0,t.Lk)("label",{for:"nome"},"Novo nome de usuário:",-1)),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>r.nome=e),type:"text",id:"nome",required:""},null,512),[[t.Jo,r.nome]])]),(0,t.Lk)("div",ro,[o[9]||(o[9]=(0,t.Lk)("label",{for:"senha"},"Nova Senha:",-1)),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>r.senha=e),type:"password",id:"senha",required:""},null,512),[[t.Jo,r.senha]])]),(0,t.Lk)("div",so,[(0,t.Lk)("div",io,[(0,t.Lk)("button",{onClick:o[2]||(o[2]=e=>r.mostrarCriarUsuario=!0)},"Criar Novo Usuário")]),o[10]||(o[10]=(0,t.Lk)("div",{class:"button-group"},[(0,t.Lk)("button",{type:"submit"},"Atualizar")],-1))])],32)]),r.mostrarCriarUsuario?((0,t.uX)(),(0,t.CE)("div",lo,[(0,t.Lk)("div",co,[(0,t.Lk)("button",{onClick:o[4]||(o[4]=e=>r.mostrarCriarUsuario=!1),class:"close-btn"},"X"),o[15]||(o[15]=(0,t.Lk)("h2",null,"Criar Novo Usuário",-1)),(0,t.Lk)("form",{onSubmit:o[7]||(o[7]=(0,t.D$)(((...e)=>s.criarUsuario&&s.criarUsuario(...e)),["prevent"]))},[(0,t.Lk)("div",uo,[o[12]||(o[12]=(0,t.Lk)("label",{for:"novoNome"},"Nome:",-1)),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>r.novoNome=e),type:"text",id:"novoNome",required:""},null,512),[[t.Jo,r.novoNome]])]),(0,t.Lk)("div",po,[o[13]||(o[13]=(0,t.Lk)("label",{for:"novaSenha"},"Senha:",-1)),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[6]||(o[6]=e=>r.novaSenha=e),type:"password",id:"novaSenha",required:""},null,512),[[t.Jo,r.novaSenha]])]),o[14]||(o[14]=(0,t.Lk)("div",{class:"button-group"},[(0,t.Lk)("button",{type:"submit"},"Criar")],-1))],32)])])):(0,t.Q3)("",!0)])):(0,t.Q3)("",!0)}const ho={data(){return{nome:"",senha:"",mostrarCriarUsuario:!1,novoNome:"",novaSenha:"",isLoggedIn:!1}},created(){this.checkLoginStatus()},methods:{checkLoginStatus(){const e=localStorage.getItem("token");if(e)try{const o=jwtDecode(e);this.isLoggedIn=!!o}catch(o){console.error("Erro ao decodificar o token:",o),this.isLoggedIn=!1,this.$router.push("/login")}else this.isLoggedIn=!1,this.$router.push("/login")},async atualizarConta(){try{const e=localStorage.getItem("token");await Pe.A.put("http://localhost:8000/users/me",{nome:this.nome,senha:this.senha},{headers:{Authorization:`Bearer ${e}`}}),alert("Conta atualizada com sucesso!")}catch(e){console.error("Erro ao atualizar conta:",e),alert("Erro ao atualizar conta.")}},async criarUsuario(){try{const e=localStorage.getItem("token");await Pe.A.post("http://localhost:8000/users/",{nome:this.novoNome,senha:this.novaSenha},{headers:{Authorization:`Bearer ${e}`}}),alert("Usuário criado com sucesso!"),this.mostrarCriarUsuario=!1,this.novoNome="",this.novaSenha=""}catch(e){console.error("Erro ao criar usuário:",e),alert("Erro ao criar usuário.")}}}},go=(0,m.A)(ho,[["render",mo],["__scopeId","data-v-860ab9b8"]]),ko=go,Lo=[{path:"/",name:"home",component:q},{path:"/gestaostock",name:"pneus",component:we},{path:"/login",name:"login",component:Me},{path:"/pesquisa",name:"Pesquisa",component:oo},{path:"/conta",name:"Conta",component:ko}],vo=(0,y.aE)({history:(0,y.LA)("/gestaostock/"),routes:Lo}),Eo=vo;(0,t.Ef)(b).use(Eo).mount("#app")},34:(e,o,a)=>{"use strict";e.exports=a.p+"img/planta_i.060a56a5.png"},39:(e,o,a)=>{"use strict";e.exports=a.p+"img/planta_desconhecida.cdb5392c.png"},86:(e,o,a)=>{var t={"./planta_a.png":338,"./planta_b.png":921,"./planta_c.png":792,"./planta_d.png":783,"./planta_desconhecida.png":39,"./planta_e.png":206,"./planta_f.png":565,"./planta_g.png":676,"./planta_geral.png":322,"./planta_h.png":163,"./planta_i.png":34,"./planta_j.png":121,"./planta_k.png":872,"./planta_l.png":743,"./planta_m.png":345,"./planta_n.png":285,"./planta_o.png":252,"./planta_p.png":99,"./planta_q.png":522,"./planta_r.png":185};function n(e){var o=r(e);return a(o)}function r(e){if(!a.o(t,e)){var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return t[e]}n.keys=function(){return Object.keys(t)},n.resolve=r,e.exports=n,n.id=86},99:(e,o,a)=>{"use strict";e.exports=a.p+"img/planta_p.95e0b5c9.png"},121:(e,o,a)=>{"use strict";e.exports=a.p+"img/planta_j.1baa2f6c.png"},163:(e,o,a)=>{"use strict";e.exports=a.p+"img/planta_h.3b47664a.png"},185:(e,o,a)=>{"use strict";e.exports=a.p+"img/planta_r.945c84a6.png"},206:(e,o,a)=>{"use strict";e.exports=a.p+"img/planta_e.d8092429.png"},252:(e,o,a)=>{"use strict";e.exports=a.p+"img/planta_o.29fd5075.png"},285:(e,o,a)=>{"use strict";e.exports=a.p+"img/planta_n.a5d0252e.png"},322:(e,o,a)=>{"use strict";e.exports=a.p+"img/planta_geral.cdb5392c.png"},338:(e,o,a)=>{"use strict";e.exports=a.p+"img/planta_a.86bee7e3.png"},345:(e,o,a)=>{"use strict";e.exports=a.p+"img/planta_m.d8a92319.png"},522:(e,o,a)=>{"use strict";e.exports=a.p+"img/planta_q.76102957.png"},565:(e,o,a)=>{"use strict";e.exports=a.p+"img/planta_f.56b7bd20.png"},676:(e,o,a)=>{"use strict";e.exports=a.p+"img/planta_g.f4344ab3.png"},743:(e,o,a)=>{"use strict";e.exports=a.p+"img/planta_l.023432f1.png"},783:(e,o,a)=>{"use strict";e.exports=a.p+"img/planta_d.b8b2f1c9.png"},792:(e,o,a)=>{"use strict";e.exports=a.p+"img/planta_c.de45fffa.png"},872:(e,o,a)=>{"use strict";e.exports=a.p+"img/planta_k.eddfdd60.png"},921:(e,o,a)=>{"use strict";e.exports=a.p+"img/planta_b.e47f9406.png"}},o={};function a(t){var n=o[t];if(void 0!==n)return n.exports;var r=o[t]={exports:{}};return e[t](r,r.exports,a),r.exports}a.m=e,(()=>{var e=[];a.O=(o,t,n,r)=>{if(!t){var s=1/0;for(d=0;d<e.length;d++){for(var[t,n,r]=e[d],i=!0,l=0;l<t.length;l++)(!1&r||s>=r)&&Object.keys(a.O).every((e=>a.O[e](t[l])))?t.splice(l--,1):(i=!1,r<s&&(s=r));if(i){e.splice(d--,1);var c=n();void 0!==c&&(o=c)}}return o}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[t,n,r]}})(),(()=>{a.d=(e,o)=>{for(var t in o)a.o(o,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o)})(),(()=>{a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{a.p="/gestaostock/"})(),(()=>{var e={524:0};a.O.j=o=>0===e[o];var o=(o,t)=>{var n,r,[s,i,l]=t,c=0;if(s.some((o=>0!==e[o]))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(l)var d=l(a)}for(o&&o(t);c<s.length;c++)r=s[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(d)},t=self["webpackChunkfrontend_pneus_vue"]=self["webpackChunkfrontend_pneus_vue"]||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))})();var t=a.O(void 0,[504],(()=>a(23)));t=a.O(t)})();
//# sourceMappingURL=app.6283ae7f.js.map